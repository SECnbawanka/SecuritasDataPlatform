{"dbEnvironment":"snowflake","version":"1.50.6","jobsTree":{"id":6572,"name":"ROOT","children":[{"id":6946,"name":"Audit","children":[],"jobs":[{"id":6947,"name":"Matillion Log Export","description":null,"type":"ORCHESTRATION","tag":"e489f2e0-85e4-4db1-a809-47e976b767ec"},{"id":6972,"name":"Send Alert","description":null,"type":"ORCHESTRATION","tag":"60b66638-94f4-4347-8c4b-b81066a48d3b"},{"id":6984,"name":"Matillion_Detail","description":null,"type":"TRANSFORMATION","tag":"b1eb6161-8025-40b1-afd2-9aa198ebb82b"},{"id":6990,"name":"Matillion_Log","description":"","type":"TRANSFORMATION","tag":"e7a76047-ff0c-495f-9fee-12f6f5412e26"},{"id":7047,"name":"Matillion_Summary","description":"","type":"TRANSFORMATION","tag":"811f42dc-49b5-4236-879e-ae9167b9c5a6"}]}],"jobs":[]},"orchestrationJobs":[{"id":6947,"revision":2,"created":1611343816571,"timestamp":1611343816571,"components":{"6901":{"id":6901,"inputCardinality":"ZERO","outputCardinality":"MANY","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":444132438,"x":-160,"y":0,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[6964,6965],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Start 0"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"6902":{"id":6902,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":1214167305,"x":160,"y":160,"width":32,"height":32,"inputConnectorIDs":[6961],"outputSuccessConnectorIDs":[6956],"outputFailureConnectorIDs":[6966],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"API Details"}}}},"visible":true},"2":{"slot":2,"name":"Basic/Advanced Mode","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Basic"}}}},"visible":true},"6":{"slot":6,"name":"Data Source","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Run History Details"}}}},"visible":true},"7":{"slot":7,"name":"Data Selection","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"id"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"type"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"jobTimestamp"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"componentName"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"state"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"rowCount"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"startTime"}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"endTime"}}},"9":{"slot":9,"values":{"1":{"slot":1,"type":"STRING","value":"message"}}},"10":{"slot":10,"values":{"1":{"slot":1,"type":"STRING","value":"since"}}}},"visible":true},"8":{"slot":8,"name":"Data Source Filter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"startTime"},"2":{"slot":2,"type":"STRING","value":"Is"},"3":{"slot":3,"type":"STRING","value":"Greater than"},"4":{"slot":4,"type":"STRING","value":"${DetailLastValue}"}}}},"visible":true},"9":{"slot":9,"name":"Combine Filters","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"And"}}}},"visible":true},"10":{"slot":10,"name":"SQL Query","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"SELECT \n[id],\n[type],\n[jobTimestamp],\n[componentName],\n[state],\n[rowCount],\n[startTime],\n[endTime],\n[message]\nfrom [Run History Details]\nwhere\nsince = '1900-01-01'"}}}},"visible":false},"11":{"slot":11,"name":"Limit","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"200"}}}},"visible":true},"12":{"slot":12,"name":"Connection Options","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"PseudoColumns"},"2":{"slot":2,"type":"STRING","value":"*=*"}}}},"visible":true},"13":{"slot":13,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"AUDIT"}}}},"visible":true},"14":{"slot":14,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"BASE"}}}},"visible":true},"15":{"slot":15,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"STG_MATILLION_DETAIL"}}}},"visible":true},"16":{"slot":16,"name":"Warehouse","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true},"17":{"slot":17,"name":"S3 Staging Area","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"18":{"slot":18,"name":"Primary Keys","elements":{},"visible":true},"20":{"slot":20,"name":"Data Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"100":{"slot":100,"name":"Profile","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Matillion API"}}}},"visible":true},"499":{"slot":499,"name":"Authentication Method","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"User/Password"}}}},"visible":true},"500":{"slot":500,"name":"Username","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"api-user"}}}},"visible":true},"501":{"slot":501,"name":"Password","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":"API"}}}},"visible":true},"1001":{"slot":1001,"name":"","elements":{},"visible":false},"1013":{"slot":1013,"name":"Auto Debug","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Off"}}}},"visible":true},"1014":{"slot":1014,"name":"Debug Level","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"3"}}}},"visible":false},"40000":{"slot":40000,"name":"Encryption","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"None"}}}},"visible":false},"40001":{"slot":40001,"name":"KMS Key ID","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"40501":{"slot":40501,"name":"","elements":{},"visible":false},"40502":{"slot":40502,"name":"Load Options","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"On"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"Off"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"On"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"On"}}}},"visible":true},"63320":{"slot":63320,"name":"Storage Account","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"63321":{"slot":63321,"name":"Blob Container","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"84533":{"slot":84533,"name":"Integration","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"88340":{"slot":88340,"name":"","elements":{},"visible":false},"88341":{"slot":88341,"name":"Staging","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Snowflake Managed"}}}},"visible":true},"98776":{"slot":98776,"name":"GCS Staging Area","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"6903":{"id":6903,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"TRANSFORM","implementationID":1896325668,"x":480,"y":160,"width":32,"height":32,"inputConnectorIDs":[6956],"outputSuccessConnectorIDs":[6957],"outputFailureConnectorIDs":[6967],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Matillion_Detail"}}}},"visible":true},"2":{"slot":2,"name":"Transformation Job","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Matillion_Detail"}}}},"visible":true},"3":{"slot":3,"name":"","elements":{},"visible":false},"4":{"slot":4,"name":"Set Scalar Variables","elements":{},"visible":true},"5":{"slot":5,"name":"Set Grid Variables","elements":{},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"6904":{"id":6904,"inputCardinality":"ONE","outputCardinality":"ZERO","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":515156205,"x":160,"y":80,"width":32,"height":32,"inputConnectorIDs":[6971],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"End Failure 0"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"6905":{"id":6905,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1773186960,"x":0,"y":0,"width":32,"height":32,"inputConnectorIDs":[6965],"outputSuccessConnectorIDs":[6962],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Watermark Summary"}}}},"visible":true},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"###\n# Variables are directly accessible: \n#   print myvar\n# Updating a variable:\n#   context.updateVariable('myvar', 'new-value')\n# Grid Variables are accessible via the context:\n#   print context.getGridVariable('mygridvar')\n# Updating a grid variable:\n#   context.updateGridVariable('mygridvar', [['list','of'],['lists','!']])\n# A database cursor can be accessed from the context (Jython only):\n#   cursor = context.cursor()\n#   cursor.execute('select count(*) from mytable')\n#   rowcount = cursor.fetchone()[0]\n###\n\n# get max value of jobtimestamp\ncmd = \"select coalesce(max(enqueuedtime),0) from AUDIT.BASE.MATILLION_SUMMARY\"\nprint(cmd)\ncursor = context.cursor()\ncursor.execute(cmd)\nmaxval = cursor.fetchone()\n#print(type(maxval[0]))\nprint(maxval[0])\n\n#assign max value of jobtimestamp to variable\n#context.updateVariable('SummaryLastValue', maxval[0])\ncontext.updateVariable('SummaryLastValue', '10090909090909090909090909')\nprint(\"SummaryLastValue:  \", SummaryLastValue)"}}}},"visible":true},"3":{"slot":3,"name":"Interpreter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Jython"}}}},"visible":true},"4":{"slot":4,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"6906":{"id":6906,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"TRANSFORM","implementationID":1896325668,"x":320,"y":0,"width":32,"height":32,"inputConnectorIDs":[6955],"outputSuccessConnectorIDs":[6959],"outputFailureConnectorIDs":[6969],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Matillion_Summary"}}}},"visible":true},"2":{"slot":2,"name":"Transformation Job","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Matillion_Summary"}}}},"visible":true},"3":{"slot":3,"name":"","elements":{},"visible":false},"4":{"slot":4,"name":"Set Scalar Variables","elements":{},"visible":true},"5":{"slot":5,"name":"Set Grid Variables","elements":{},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"6907":{"id":6907,"inputCardinality":"ONE","outputCardinality":"ZERO","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":515156205,"x":480,"y":240,"width":32,"height":32,"inputConnectorIDs":[6967],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"End Failure 3"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"6908":{"id":6908,"inputCardinality":"ONE","outputCardinality":"ZERO","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":-1946388514,"x":960,"y":0,"width":32,"height":32,"inputConnectorIDs":[6958],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"End Success 0"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"6909":{"id":6909,"inputCardinality":"ONE","outputCardinality":"ZERO","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":515156205,"x":160,"y":240,"width":32,"height":32,"inputConnectorIDs":[6966],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"End Failure 1"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"6910":{"id":6910,"inputCardinality":"ONE","outputCardinality":"ZERO","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":515156205,"x":320,"y":80,"width":32,"height":32,"inputConnectorIDs":[6969],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"End Failure 2"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"6911":{"id":6911,"inputCardinality":"ONE","outputCardinality":"ZERO","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":515156205,"x":800,"y":80,"width":32,"height":32,"inputConnectorIDs":[6970],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"End Failure 4"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"6949":{"id":6949,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":1214167305,"x":160,"y":0,"width":32,"height":32,"inputConnectorIDs":[6962],"outputSuccessConnectorIDs":[6955],"outputFailureConnectorIDs":[6971],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"API Summary"}}}},"visible":true},"2":{"slot":2,"name":"Basic/Advanced Mode","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Basic"}}}},"visible":true},"6":{"slot":6,"name":"Data Source","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Run History Summary"}}}},"visible":true},"7":{"slot":7,"name":"Data Selection","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"id"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"type"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"groupName"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"projectName"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"versionID"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"versionName"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"environmentName"}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"jobName"}}},"9":{"slot":9,"values":{"1":{"slot":1,"type":"STRING","value":"state"}}},"10":{"slot":10,"values":{"1":{"slot":1,"type":"STRING","value":"enqueuedTime"}}},"11":{"slot":11,"values":{"1":{"slot":1,"type":"STRING","value":"startTime"}}},"12":{"slot":12,"values":{"1":{"slot":1,"type":"STRING","value":"endTime"}}},"13":{"slot":13,"values":{"1":{"slot":1,"type":"STRING","value":"message"}}}},"visible":true},"8":{"slot":8,"name":"Data Source Filter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"enqueuedTime"},"2":{"slot":2,"type":"STRING","value":"Is"},"3":{"slot":3,"type":"STRING","value":"Greater than or equal to"},"4":{"slot":4,"type":"STRING","value":"${SummaryLastValue}"}}}},"visible":true},"9":{"slot":9,"name":"Combine Filters","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"And"}}}},"visible":true},"10":{"slot":10,"name":"SQL Query","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"SELECT \n[id],\n[type],\n[groupName],\n[projectName],\n[versionID],\n[versionName],\n[environmentName],\n[jobName],\n[state],\n[enqueuedTime],\n[startTime],\n[endTime],\n[message]\nfrom [Run History Summary]\nwhere\nsince = '1900-01-01'"}}}},"visible":false},"11":{"slot":11,"name":"Limit","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":true},"12":{"slot":12,"name":"Connection Options","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"PseudoColumns"},"2":{"slot":2,"type":"STRING","value":"*=*"}}}},"visible":true},"13":{"slot":13,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"AUDIT"}}}},"visible":true},"14":{"slot":14,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"BASE"}}}},"visible":true},"15":{"slot":15,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"STG_MATILLION_SUMMARY"}}}},"visible":true},"16":{"slot":16,"name":"Warehouse","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true},"17":{"slot":17,"name":"S3 Staging Area","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"18":{"slot":18,"name":"Primary Keys","elements":{},"visible":true},"20":{"slot":20,"name":"Data Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"REST"}}}},"visible":false},"100":{"slot":100,"name":"Profile","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Matillion API"}}}},"visible":true},"499":{"slot":499,"name":"Authentication Method","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"User/Password"}}}},"visible":true},"500":{"slot":500,"name":"Username","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"api-user"}}}},"visible":true},"501":{"slot":501,"name":"Password","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"PASSWORD","value":"API"}}}},"visible":true},"1001":{"slot":1001,"name":"","elements":{},"visible":false},"1013":{"slot":1013,"name":"Auto Debug","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Off"}}}},"visible":true},"1014":{"slot":1014,"name":"Debug Level","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"3"}}}},"visible":false},"40000":{"slot":40000,"name":"Encryption","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"None"}}}},"visible":false},"40001":{"slot":40001,"name":"KMS Key ID","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"40501":{"slot":40501,"name":"","elements":{},"visible":false},"40502":{"slot":40502,"name":"Load Options","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"On"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"Off"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"On"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":""}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"On"}}}},"visible":true},"63320":{"slot":63320,"name":"Storage Account","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"63321":{"slot":63321,"name":"Blob Container","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"84533":{"slot":84533,"name":"Integration","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"88340":{"slot":88340,"name":"","elements":{},"visible":false},"88341":{"slot":88341,"name":"Staging","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Snowflake Managed"}}}},"visible":true},"98776":{"slot":98776,"name":"GCS Staging Area","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"6950":{"id":6950,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1773186960,"x":0,"y":160,"width":32,"height":32,"inputConnectorIDs":[6964],"outputSuccessConnectorIDs":[6961],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Watermark Detail"}}}},"visible":true},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"###\n# Variables are directly accessible: \n#   print myvar\n# Updating a variable:\n#   context.updateVariable('myvar', 'new-value')\n# Grid Variables are accessible via the context:\n#   print context.getGridVariable('mygridvar')\n# Updating a grid variable:\n#   context.updateGridVariable('mygridvar', [['list','of'],['lists','!']])\n# A database cursor can be accessed from the context (Jython only):\n#   cursor = context.cursor()\n#   cursor.execute('select count(*) from mytable')\n#   rowcount = cursor.fetchone()[0]\n###\n\n# get max value of jobtimestamp\ncmd = \"select coalesce(max(id),0) from AUDIT.BASE.MATILLION_DETAIL\"\nprint(cmd)\ncursor = context.cursor()\ncursor.execute(cmd)\nmaxval = cursor.fetchone()\n#print(type(maxval[0]))\nprint(maxval[0])\n\n#assign max value of jobtimestamp to variable\n#context.updateVariable('DetailLastValue', maxval[0])\ncontext.updateVariable('DetailLastValue', '10090909090909090909090909')\n\nprint(\"DetailLastValue:  \", DetailLastValue)"}}}},"visible":true},"3":{"slot":3,"name":"Interpreter","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Jython"}}}},"visible":true},"4":{"slot":4,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"6951":{"id":6951,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"TRANSFORM","implementationID":1896325668,"x":800,"y":0,"width":32,"height":32,"inputConnectorIDs":[6963],"outputSuccessConnectorIDs":[6958],"outputFailureConnectorIDs":[6970],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Matillion_Log"}}}},"visible":true},"2":{"slot":2,"name":"Transformation Job","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Matillion_Log"}}}},"visible":true},"3":{"slot":3,"name":"","elements":{},"visible":false},"4":{"slot":4,"name":"Set Scalar Variables","elements":{},"visible":true},"5":{"slot":5,"name":"Set Grid Variables","elements":{},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"6952":{"id":6952,"inputCardinality":"MANY","outputCardinality":"MANY","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":235671163,"x":640,"y":0,"width":32,"height":32,"inputConnectorIDs":[6960,6957],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[6963],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"And 0"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"6953":{"id":6953,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"TRANSFORM","implementationID":1785813072,"x":480,"y":0,"width":32,"height":32,"inputConnectorIDs":[6959],"outputSuccessConnectorIDs":[6960],"outputFailureConnectorIDs":[6968],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Send Alert"}}}},"visible":true},"2":{"slot":2,"name":"Orchestration Job","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Send Alert"}}}},"visible":true},"3":{"slot":3,"name":"","elements":{},"visible":false},"4":{"slot":4,"name":"Set Scalar Variables","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"SummaryLastValue"},"2":{"slot":2,"type":"STRING","value":"${SummaryLastValue}"}}}},"visible":true},"5":{"slot":5,"name":"Set Grid Variables","elements":{},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"6954":{"id":6954,"inputCardinality":"ONE","outputCardinality":"ZERO","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":515156205,"x":479,"y":82,"width":32,"height":32,"inputConnectorIDs":[6968],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"End Failure 5"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]}},"successConnectors":{"6960":{"id":6960,"sourceID":6953,"targetID":6952},"6961":{"id":6961,"sourceID":6950,"targetID":6902},"6962":{"id":6962,"sourceID":6905,"targetID":6949},"6955":{"id":6955,"sourceID":6949,"targetID":6906},"6956":{"id":6956,"sourceID":6902,"targetID":6903},"6957":{"id":6957,"sourceID":6903,"targetID":6952},"6958":{"id":6958,"sourceID":6951,"targetID":6908},"6959":{"id":6959,"sourceID":6906,"targetID":6953}},"failureConnectors":{"6966":{"id":6966,"sourceID":6902,"targetID":6909},"6967":{"id":6967,"sourceID":6903,"targetID":6907},"6968":{"id":6968,"sourceID":6953,"targetID":6954},"6969":{"id":6969,"sourceID":6906,"targetID":6910},"6970":{"id":6970,"sourceID":6951,"targetID":6911},"6971":{"id":6971,"sourceID":6949,"targetID":6904}},"unconditionalConnectors":{"6963":{"id":6963,"sourceID":6952,"targetID":6951},"6964":{"id":6964,"sourceID":6901,"targetID":6950},"6965":{"id":6965,"sourceID":6901,"targetID":6905}},"trueConnectors":{},"falseConnectors":{},"iterationConnectors":{},"noteConnectors":{},"canUndo":false,"undoCommand":"","undoCreated":-1,"canRedo":false,"redoCommand":"","redoCreated":-1,"notes":{"6948":{"id":6948,"x":-152,"y":-151,"width":707,"height":64,"text":"Trying to get similar info to this...\n\nhttps://www.matillion.com/blog/redshift/amazon-quicksight-dashboard-matillion-jobs/?utm_content=73830408","colour":"00ce4f"}},"variables":{"DetailLastValue":{"definition":{"name":"DetailLastValue","type":"DECIMAL","scope":"BRANCH","description":"","visibility":"PRIVATE"},"value":"0"},"SummaryLastValue":{"definition":{"name":"SummaryLastValue","type":"DECIMAL","scope":"BRANCH","description":"","visibility":"PRIVATE"},"value":"0"}},"grids":{}},{"id":6972,"revision":2,"created":1611343816580,"timestamp":1611343816580,"components":{"6976":{"id":6976,"inputCardinality":"ZERO","outputCardinality":"MANY","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":444132438,"x":0,"y":0,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[6982],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Start 0"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"6977":{"id":6977,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":1155583855,"x":160,"y":0,"width":32,"height":32,"inputConnectorIDs":[6982],"outputSuccessConnectorIDs":[6981],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Get Job History"}}}},"visible":true},"2":{"slot":2,"name":"Basic/Advanced","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Advanced"}}}},"visible":true},"3":{"slot":3,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"AUDIT"}}}},"visible":false},"4":{"slot":4,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"MATILLION_LOG"}}}},"visible":false},"6":{"slot":6,"name":"Table Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ID"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"JOB_TYPE"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"GROUPNAME"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"PROJECTNAME"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"VERSIONID"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"VERSIONNAME"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"ENVIRONMENTNAME"}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"JOBNAME"}}},"9":{"slot":9,"values":{"1":{"slot":1,"type":"STRING","value":"JOB_STATE"}}},"10":{"slot":10,"values":{"1":{"slot":1,"type":"STRING","value":"JOB_ENQUEUEDTIME"}}},"11":{"slot":11,"values":{"1":{"slot":1,"type":"STRING","value":"JOB_STARTTIME"}}},"12":{"slot":12,"values":{"1":{"slot":1,"type":"STRING","value":"JOB_ENDTIME"}}},"13":{"slot":13,"values":{"1":{"slot":1,"type":"STRING","value":"JOB_MESSAGE"}}},"14":{"slot":14,"values":{"1":{"slot":1,"type":"STRING","value":"COMPONENT_TYPE"}}},"15":{"slot":15,"values":{"1":{"slot":1,"type":"STRING","value":"JOB_TIMESTAMP"}}},"16":{"slot":16,"values":{"1":{"slot":1,"type":"STRING","value":"COMPONENT_NAME"}}},"17":{"slot":17,"values":{"1":{"slot":1,"type":"STRING","value":"COMPONENT_STATE"}}},"18":{"slot":18,"values":{"1":{"slot":1,"type":"STRING","value":"ROWCOUNT"}}},"19":{"slot":19,"values":{"1":{"slot":1,"type":"STRING","value":"COMPONENT_STARTTIME"}}},"20":{"slot":20,"values":{"1":{"slot":1,"type":"STRING","value":"COMPONENT_ENDTIME"}}},"21":{"slot":21,"values":{"1":{"slot":1,"type":"STRING","value":"COMPONENT_MESSAGE"}}}},"visible":false},"7":{"slot":7,"name":"SQL Query","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"SELECT DISTINCT\n\"PROJECTNAME\",\n\"JOBNAME\",\n\"STATE\",\nconvert_timezone('UTC','CET',dateadd('milliseconds',TO_NUMBER(\"ENQUEUEDTIME\")/1,'1970-01-01 00:00:00.0000')::timestamp_ltz) as \"ENQUEUEDTIME\"\nFROM AUDIT.BASE.MATILLION_SUMMARY\nWHERE \n\"TYPE\" in ('RUN_ORCHESTRATION','RUN_JOB','API_ORCHESTRATION','SCHEDULE_ORCHESTRATION')\nand\n\"STATE\" ='FAILED'\nand\nTO_TIMESTAMP_NTZ(\"ENQUEUEDTIME\") > dateadd(minute,-6,convert_timezone('CET','UTC',current_timestamp()))\n"}}}},"visible":true},"8":{"slot":8,"name":"Grid Variable","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Jobs"}}}},"visible":true},"9":{"slot":9,"name":"Grid Variable Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"JOBNAME"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"ENQUEUEDTIME"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"STATE"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"PROJECTNAME"}}}},"visible":true},"10":{"slot":10,"name":"Limit","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"100"}}}},"visible":false},"11":{"slot":11,"name":"Order By","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"JOB_ENQUEUEDTIME"}}}},"visible":false},"12":{"slot":12,"name":"Sort","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Descending"}}}},"visible":false},"20":{"slot":20,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"BASE"}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"6978":{"id":6978,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-30576616,"x":320,"y":32,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"SendMail"}}}},"visible":true},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"#\n# Variables are exported into bash, but should be considered read-only: \n#    echo $myvar\n###\n\n\nEMAIL=$env_monitor_email\nSUBJECT=\"Matillion Failure - $env_name - $JOB_NAME\"\nBODY=\"Job $JOB_NAME on Matillion $JOB_ENVIRONMENT Enqueued at $JOB_ENQUEUEDTIME has a status of $JOB_STATUS.\"\nMAIL=\"subject:$SUBJECT\\nfrom:Matillion Server<admin@snaportal.com>\\n$BODY\"\n#MAIL=\"subject:Matillion Mail Test\\nfrom:Matillion ELT Box<admin@snaportal.com>\\nThis is a test mail\"\n#echo $SUBJECT#e\n#echo $BODY\n#echo $BODY | mail -s \"$SUBJECT\" -aFrom: Admin\\<admin@snaportal.com\\> $EMAIL\necho $MAIL\necho -e $MAIL | /sbin/sendmail -t $EMAIL"}}}},"visible":true},"3":{"slot":3,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[6983]},"6979":{"id":6979,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-1900230221,"x":464,"y":16,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Send to Azure Queue"}}}},"visible":true},"2":{"slot":2,"name":"Storage Account","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"devdwstoreu202"}}}},"visible":true},"3":{"slot":3,"name":"Queue","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"dw-status"}}}},"visible":true},"4":{"slot":4,"name":"Message","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"At ${JOB_ENQUEUEDTIME}, in the ${JOB_ENVIRONMENT} environment, job ${JOB_NAME} was queued and had a status of ${JOB_STATUS}."}}}},"visible":true},"5":{"slot":5,"name":"Message Format","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Plain"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"DISABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"6980":{"id":6980,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"ITERATE","implementationID":-424773870,"x":320,"y":0,"width":32,"height":16,"inputConnectorIDs":[6981],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Iterate Job"}}}},"visible":true},"3":{"slot":3,"name":"Grid Variable","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Jobs"}}}},"visible":true},"4":{"slot":4,"name":"Grid Variable Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"JOB_NAME"},"2":{"slot":2,"type":"STRING","value":"JOB_NAME"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"JOB_STARTTIME"},"2":{"slot":2,"type":"STRING","value":"JOB_ENQUEUEDTIME"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"JOB_STATUS"},"2":{"slot":2,"type":"STRING","value":"JOB_STATUS"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"JOB_ENVIRONMENT"},"2":{"slot":2,"type":"STRING","value":"JOB_ENVIRONMENT"}}}},"visible":true},"5":{"slot":5,"name":"Break on Failure","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true},"6":{"slot":6,"name":"Concurrency","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Sequential"}}}},"visible":true},"999":{"slot":999,"name":"Record Values In Task History","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[6983],"inputIterationConnectorIDs":[]}},"successConnectors":{"6981":{"id":6981,"sourceID":6977,"targetID":6980}},"failureConnectors":{},"unconditionalConnectors":{"6982":{"id":6982,"sourceID":6976,"targetID":6977}},"trueConnectors":{},"falseConnectors":{},"iterationConnectors":{"6983":{"id":6983,"sourceID":6980,"targetID":6978}},"noteConnectors":{},"canUndo":false,"undoCommand":"","undoCreated":-1,"canRedo":false,"redoCommand":"","redoCreated":-1,"notes":{"6973":{"id":6973,"x":-796,"y":-127,"width":463,"height":191,"text":"From Renak...\n\n[5/29 5:27 PM] Brian Renak\n    This is to test email.  The bash version has some extra stuff in it to keep track of when you last sent.  If no new errors, it will send the update that its OK now.  Read through it, hope it makes sense.  Right now it will only create the required file, send a mail, set the value that it sent to 1, then stop.  Running a second time leaving the emailsent file there, will NOT send an email (as designed).  You'd have to comment out the error section so its value is 0, then it would send the update...\n","colour":"e6e63c"},"6974":{"id":6974,"x":-810,"y":82,"width":443,"height":220,"text":"Bash Send email...\n\nEMAIL=brian.raney@securitasinc.com\nSUBJECT=\"ERRORS in replication\"\nBODY=\"Replication (SQL) is stopped 1396 Error\"\n#MAIL=\"subject:$SUBJECT\\nfrom:TrackTick MySQL Replication<admin@snaportal.com>\\n$BODY\"\nMAIL=\"subject:Matillion Mail Test\\nfrom:Matillion ELT Box<admin@snaportal.com>\\nThis is a test mail\"\n#echo $SUBJECT\n#echo $BODY\n#echo $BODY | mail -s \"$SUBJECT\" -aFrom: Admin\\<admin@snaportal.com\\> $EMAIL\necho -e $MAIL | /sbin/sendmail $EMAIL\n","colour":"e6e63c"},"6975":{"id":6975,"x":-344,"y":126,"width":433,"height":225,"text":"Is this needed, too?\n\n#!/bin/bash\nfunction extract_value {\n    FILENAME=$1\n    VAR=$2\n    grep -w $VAR $FILENAME | awk -v N=2 '{sep=\"\"; for (i=N; i<=NF; i++) {printf(\"%s%s\",sep,$i); sep=OFS}; printf(\"\\n\")}'\n}\n\n#This depends on a file called \"emailsent\" to exist, with a line in it that reads \"Email_Sent: #\"\n#The below checks for it, and if it does not find it, creates it for you\nif [ ! -f emailsent ]\nthen\n    echo \"Email_Sent: 0\" > emailsent\nfi\n\nEmail_Sent=$(extract_value emailsent Email_Sent)\n\n#You would add up error counts to know if you need to send an email.\n#Example:\nERROR_COUNT=0\nif [ 1 > 2 ]\nthen\n    ERRORS[$ERROR_COUNT]=\"Some kind of a message here that will show up in email body\"\n    ERROR_COUNT=$(($ERROR_COUNT+1))\nfi\n\nif [ $ERROR_COUNT -gt 0 ]\nthen\n    if [ \"$Email_Sent\" == 0 ]\n    then\n        EMAIL=brian.raney@securitasinc.com\n        SUBJECT=\"ALERT: ERRORS In XYZ\"\n        BODY=''\n        CNT=0\n        while [ \"$CNT\" != \"$ERROR_COUNT\" ]\n        do\n            BODY=\"$BODY ${ERRORS[$CNT]}\"\n            CNT=$(($CNT+1))\n        done\n\t\tBODY=\"$(echo -e \"${BODY}\" | sed -e 's/^[[:space:]]*//')\"\n        MAIL=\"subject:$SUBJECT\\nfrom:Matillion DEV<admin@snaportal.com>\\n$BODY\"\n        echo -e $MAIL | /sbin/sendmail $EMAIL\n        echo \"Email_Sent: 1\" > emailsent\n    else\n        echo \"Replication FAILED Email Already Sent\"\n    fi\nelse\n    if [ \"$Email_Sent\" == 1 ]\n    then\n        EMAIL=brian.raney@securitasinc.com\n        SUBJECT=\"ALERT: XYZ Back Online\"\n        BODY=''\n        MAIL=\"subject:$SUBJECT\\nfrom:Matillion DEV<admin@snaportal.com>\\n$BODY\"\n        echo -e $MAIL | /sbin/sendmail $EMAIL\n    fi\n    echo \"Email_Sent: 0\" > emailsent\n    echo \"Replication OK\"\n    printf \"file: %s at %'d\\n\" $Master_Log_File  $Read_Master_Log_Pos\n\nfi\n","colour":"e6e63c"}},"variables":{"JOB_NAME":{"definition":{"name":"JOB_NAME","type":"TEXT","scope":"BRANCH","description":"","visibility":"PRIVATE"},"value":"test job"},"JOB_STATUS":{"definition":{"name":"JOB_STATUS","type":"TEXT","scope":"BRANCH","description":"","visibility":"PRIVATE"},"value":"FAILED"},"JOB_ENVIRONMENT":{"definition":{"name":"JOB_ENVIRONMENT","type":"TEXT","scope":"BRANCH","description":"","visibility":"PRIVATE"},"value":"test env"},"JOB_ENQUEUEDTIME":{"definition":{"name":"JOB_ENQUEUEDTIME","type":"TEXT","scope":"BRANCH","description":"","visibility":"PRIVATE"},"value":"00:00:00"},"SummaryLastValue":{"definition":{"name":"SummaryLastValue","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},"value":"1"}},"grids":{"Jobs":{"definition":{"name":"Jobs","scope":"BRANCH","definitions":[{"name":"JOB_NAME","type":"TEXT"},{"name":"JOB_STARTTIME","type":"DATETIME"},{"name":"JOB_STATUS","type":"TEXT"},{"name":"JOB_ENVIRONMENT","type":"TEXT"}],"description":"","visibility":"PRIVATE"},"values":[]}}}],"transformationJobs":[{"id":6984,"revision":2,"created":1611343816618,"timestamp":1611343816618,"components":{"6987":{"id":6987,"inputCardinality":"ZERO","outputCardinality":"MANY","implementationID":1354890871,"x":556,"y":243,"width":32,"height":32,"inputConnectorIDs":[],"outputConnectorIDs":[6989],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"STG_MATILLION_DETAIL"}}}},"visible":true},"2":{"slot":2,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"STG_MATILLION_DETAIL"}}}},"visible":true},"3":{"slot":3,"name":"Column Names","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"id"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"type"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"jobTimestamp"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"componentName"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"state"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"rowCount"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"startTime"}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"endTime"}}},"9":{"slot":9,"values":{"1":{"slot":1,"type":"STRING","value":"message"}}},"10":{"slot":10,"values":{"1":{"slot":1,"type":"STRING","value":"since"}}}},"visible":true},"5":{"slot":5,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"BASE"}}}},"visible":true},"6":{"slot":6,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"AUDIT"}}}},"visible":true},"7":{"slot":7,"name":"Offset","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":""}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"6988":{"id":6988,"inputCardinality":"ONE","outputCardinality":"ZERO","implementationID":-1848704949,"x":720,"y":240,"width":32,"height":32,"inputConnectorIDs":[6989],"outputConnectorIDs":[],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"MATILLION_DETAIL"}}}},"visible":true},"200":{"slot":200,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"MATILLION_DETAIL"}}}},"visible":true},"201":{"slot":201,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"BASE"}}}},"visible":true},"202":{"slot":202,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"AUDIT"}}}},"visible":true},"203":{"slot":203,"name":"Warehouse","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true},"204":{"slot":204,"name":"Target Alias","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"tgt"}}}},"visible":true},"205":{"slot":205,"name":"Source Alias","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"src"}}}},"visible":true},"206":{"slot":206,"name":"Join Expression","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"\"tgt\".\"ID\" = \"src\".\"id\"\nAND\n\"tgt\".\"COMPONENTNAME\" = \"src\".\"componentName\""},"2":{"slot":2,"type":"STRING","value":"Join"}}}},"visible":true},"207":{"slot":207,"name":"When Matched","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"<none>"},"2":{"slot":2,"type":"STRING","value":"Update"}}}},"visible":true},"208":{"slot":208,"name":"Update Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"type"},"2":{"slot":2,"type":"STRING","value":"TYPE"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"jobTimestamp"},"2":{"slot":2,"type":"STRING","value":"JOBTIMESTAMP"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"componentName"},"2":{"slot":2,"type":"STRING","value":"COMPONENTNAME"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"state"},"2":{"slot":2,"type":"STRING","value":"STATE"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"rowCount"},"2":{"slot":2,"type":"STRING","value":"ROWCOUNT"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"startTime"},"2":{"slot":2,"type":"STRING","value":"STARTTIME"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"endTime"},"2":{"slot":2,"type":"STRING","value":"ENDTIME"}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"message"},"2":{"slot":2,"type":"STRING","value":"MESSAGE"}}}},"visible":true},"209":{"slot":209,"name":"Include Not Matched","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"210":{"slot":210,"name":"Insert Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"id"},"2":{"slot":2,"type":"STRING","value":"ID"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"type"},"2":{"slot":2,"type":"STRING","value":"TYPE"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"jobTimestamp"},"2":{"slot":2,"type":"STRING","value":"JOBTIMESTAMP"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"componentName"},"2":{"slot":2,"type":"STRING","value":"COMPONENTNAME"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"state"},"2":{"slot":2,"type":"STRING","value":"STATE"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"rowCount"},"2":{"slot":2,"type":"STRING","value":"ROWCOUNT"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"startTime"},"2":{"slot":2,"type":"STRING","value":"STARTTIME"}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"endTime"},"2":{"slot":2,"type":"STRING","value":"ENDTIME"}}},"9":{"slot":9,"values":{"1":{"slot":1,"type":"STRING","value":"message"},"2":{"slot":2,"type":"STRING","value":"MESSAGE"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"}},"connectors":{"6989":{"id":6989,"sourceID":6987,"targetID":6988}},"canUndo":false,"undoCommand":"","undoCreated":-1,"canRedo":false,"redoCommand":"","redoCreated":-1,"notes":{"6985":{"id":6985,"x":902,"y":179,"width":250,"height":58,"text":"create or replace TABLE MATILLION_DETAIL (\n\tID VARCHAR(2000) NOT NULL,\n\tTYPE VARCHAR(2000),\n\tJOBTIMESTAMP VARCHAR(2000),\n\tCOMPONENTNAME VARCHAR(2000),\n\tSTATE VARCHAR(2000),\n\tROWCOUNT VARCHAR(2000),\n\tSTARTTIME VARCHAR(2000),\n\tENDTIME VARCHAR(2000),\n\tMESSAGE VARCHAR(2000),\n\tAUDIT_SRC_SYSTEM_ID VARCHAR(1024),\n\tAUDIT_CREATEDBY VARCHAR(255) NOT NULL DEFAULT CURRENT_USER(),\n\tAUDIT_CREATEDBY_TIMESTAMP TIMESTAMP_LTZ(9) NOT NULL DEFAULT CURRENT_TIMESTAMP(),\n\tAUDIT_MODIFIEDBY VARCHAR(255) NOT NULL DEFAULT CURRENT_USER(),\n\tAUDIT_MODIFIEDBY_TIMESTAMP TIMESTAMP_LTZ(9) NOT NULL DEFAULT CURRENT_TIMESTAMP(),\n\tconstraint PK_MATILLION_DETAIL primary key (ID)\n);","colour":"e6e63c"},"6986":{"id":6986,"x":165,"y":168,"width":305,"height":148,"text":"**``CHANGE HISTORY``**\n\n20191108:  Created (BRR)","colour":"00ce4f"}},"noteConnectors":{},"variables":{},"grids":{}},{"id":6990,"revision":2,"created":1611343816627,"timestamp":1611343816627,"components":{"6993":{"id":6993,"inputCardinality":"ZERO","outputCardinality":"MANY","implementationID":1354890871,"x":398,"y":393,"width":32,"height":32,"inputConnectorIDs":[],"outputConnectorIDs":[7046],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"MATILLION_SUMMARY"}}}},"visible":true},"2":{"slot":2,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"MATILLION_SUMMARY"}}}},"visible":true},"3":{"slot":3,"name":"Column Names","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ID"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"TYPE"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"GROUPNAME"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"PROJECTNAME"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"VERSIONID"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"VERSIONNAME"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"ENVIRONMENTNAME"}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"JOBNAME"}}},"9":{"slot":9,"values":{"1":{"slot":1,"type":"STRING","value":"STATE"}}},"10":{"slot":10,"values":{"1":{"slot":1,"type":"STRING","value":"ENQUEUEDTIME"}}},"11":{"slot":11,"values":{"1":{"slot":1,"type":"STRING","value":"STARTTIME"}}},"12":{"slot":12,"values":{"1":{"slot":1,"type":"STRING","value":"ENDTIME"}}},"13":{"slot":13,"values":{"1":{"slot":1,"type":"STRING","value":"MESSAGE"}}}},"visible":true},"5":{"slot":5,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"BASE"}}}},"visible":true},"6":{"slot":6,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"AUDIT"}}}},"visible":true},"7":{"slot":7,"name":"Offset","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":""}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"6994":{"id":6994,"inputCardinality":"ZERO_OR_MANY","outputCardinality":"MANY","implementationID":-1266674941,"x":720,"y":240,"width":32,"height":32,"inputConnectorIDs":[7045],"outputConnectorIDs":[7041],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Flatten SQL"}}}},"visible":true},"2":{"slot":2,"name":"SQL Query","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"SELECT \nmd.id,\nTYPE.value::string AS type, \njts.value::integer AS jobtimestamp,\ncn.value::string AS componentname,\nstate.value::string AS state,\nrowcount.value::integer AS rowcount,\nst.value::integer AS starttime,\net.value::integer AS endtime,\nmsg.value::string as message\nFROM $T{SPLIT Strings} md,\nLATERAL flatten(INPUT => md.TYPE, mode => 'ARRAY') type,\nLATERAL flatten(INPUT => md.jobtimestamp, mode => 'ARRAY') jts,\nLATERAL flatten(INPUT => md.componentname, mode => 'ARRAY') cn,\nLATERAL flatten(INPUT => md.state, mode => 'ARRAY') state,\nLATERAL flatten(INPUT => md.rowcount, mode => 'ARRAY') rowcount,\nLATERAL flatten(INPUT => md.starttime, mode => 'ARRAY') st, \nLATERAL flatten(INPUT => md.endtime, mode => 'ARRAY') et,\nLATERAL flatten(INPUT => md.message, mode => 'ARRAY') msg\nWHERE \n TYPE.INDEX = jts.INDEX\nAND TYPE.INDEX = cn.INDEX\nAND TYPE.INDEX = state.INDEX\nAND TYPE.INDEX = rowcount.INDEX\nAND TYPE.INDEX = st.INDEX\nAND TYPE.INDEX = et.index\nAND TYPE.INDEX = msg.index"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"6995":{"id":6995,"inputCardinality":"ZERO","outputCardinality":"MANY","implementationID":1354890871,"x":395,"y":235,"width":32,"height":32,"inputConnectorIDs":[],"outputConnectorIDs":[7044],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"MATILLION_DETAIL"}}}},"visible":true},"2":{"slot":2,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"MATILLION_DETAIL"}}}},"visible":true},"3":{"slot":3,"name":"Column Names","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ID"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"TYPE"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"JOBTIMESTAMP"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"COMPONENTNAME"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"STATE"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"ROWCOUNT"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"STARTTIME"}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"ENDTIME"}}},"9":{"slot":9,"values":{"1":{"slot":1,"type":"STRING","value":"MESSAGE"}}}},"visible":true},"5":{"slot":5,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"BASE"}}}},"visible":true},"6":{"slot":6,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"AUDIT"}}}},"visible":true},"7":{"slot":7,"name":"Offset","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":""}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"6996":{"id":6996,"inputCardinality":"MANY","outputCardinality":"MANY","implementationID":-629958239,"x":1040,"y":240,"width":32,"height":32,"inputConnectorIDs":[7042,7046],"outputConnectorIDs":[7040],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Join 0"}}}},"visible":true},"2":{"slot":2,"name":"Main Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"MATILLION_SUMMARY"}}}},"visible":true},"3":{"slot":3,"name":"Main Table Alias","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ms"}}}},"visible":true},"4":{"slot":4,"name":"Joins","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Only Execution"},"2":{"slot":2,"type":"STRING","value":"md"},"3":{"slot":3,"type":"STRING","value":"Inner"}}}},"visible":true},"5":{"slot":5,"name":"Join Expressions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"\"ms\".\"ID\" = \"md\".\"ID\""},"2":{"slot":2,"type":"STRING","value":"ms_Inner_md"}}}},"visible":true},"6":{"slot":6,"name":"Output Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ms.ID"},"2":{"slot":2,"type":"STRING","value":"ID"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"ms.TYPE"},"2":{"slot":2,"type":"STRING","value":"JOB_TYPE"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"ms.GROUPNAME"},"2":{"slot":2,"type":"STRING","value":"GROUPNAME"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"ms.PROJECTNAME"},"2":{"slot":2,"type":"STRING","value":"PROJECTNAME"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"ms.VERSIONID"},"2":{"slot":2,"type":"STRING","value":"VERSIONID"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"ms.VERSIONNAME"},"2":{"slot":2,"type":"STRING","value":"VERSIONNAME"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"ms.ENVIRONMENTNAME"},"2":{"slot":2,"type":"STRING","value":"ENVIRONMENTNAME"}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"ms.JOBNAME"},"2":{"slot":2,"type":"STRING","value":"JOBNAME"}}},"9":{"slot":9,"values":{"1":{"slot":1,"type":"STRING","value":"ms.STATE"},"2":{"slot":2,"type":"STRING","value":"JOB_STATE"}}},"10":{"slot":10,"values":{"1":{"slot":1,"type":"STRING","value":"ms.ENQUEUEDTIME"},"2":{"slot":2,"type":"STRING","value":"ENQUEUEDTIME"}}},"11":{"slot":11,"values":{"1":{"slot":1,"type":"STRING","value":"ms.STARTTIME"},"2":{"slot":2,"type":"STRING","value":"ms_STARTTIME"}}},"12":{"slot":12,"values":{"1":{"slot":1,"type":"STRING","value":"ms.ENDTIME"},"2":{"slot":2,"type":"STRING","value":"ms_ENDTIME"}}},"13":{"slot":13,"values":{"1":{"slot":1,"type":"STRING","value":"ms.MESSAGE"},"2":{"slot":2,"type":"STRING","value":"JOB_MESSAGE"}}},"14":{"slot":14,"values":{"1":{"slot":1,"type":"STRING","value":"md.TYPE"},"2":{"slot":2,"type":"STRING","value":"COMPONENT_TYPE"}}},"15":{"slot":15,"values":{"1":{"slot":1,"type":"STRING","value":"md.JOBTIMESTAMP"},"2":{"slot":2,"type":"STRING","value":"JOBTIMESTAMP"}}},"16":{"slot":16,"values":{"1":{"slot":1,"type":"STRING","value":"md.COMPONENTNAME"},"2":{"slot":2,"type":"STRING","value":"COMPONENTNAME"}}},"17":{"slot":17,"values":{"1":{"slot":1,"type":"STRING","value":"md.STATE"},"2":{"slot":2,"type":"STRING","value":"COMPONENT_STATE"}}},"18":{"slot":18,"values":{"1":{"slot":1,"type":"STRING","value":"md.ROWCOUNT"},"2":{"slot":2,"type":"STRING","value":"ROWCOUNT"}}},"19":{"slot":19,"values":{"1":{"slot":1,"type":"STRING","value":"md.STARTTIME"},"2":{"slot":2,"type":"STRING","value":"md_STARTTIME"}}},"20":{"slot":20,"values":{"1":{"slot":1,"type":"STRING","value":"md.ENDTIME"},"2":{"slot":2,"type":"STRING","value":"md_ENDTIME"}}},"21":{"slot":21,"values":{"1":{"slot":1,"type":"STRING","value":"md.MESSAGE"},"2":{"slot":2,"type":"STRING","value":"COMPONENT_MESSAGE"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"6997":{"id":6997,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":-1760161015,"x":880,"y":240,"width":32,"height":32,"inputConnectorIDs":[7041],"outputConnectorIDs":[7042],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Only Execution"}}}},"visible":true},"2":{"slot":2,"name":"Filter Conditions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"TYPE"},"2":{"slot":2,"type":"STRING","value":"Is"},"3":{"slot":3,"type":"STRING","value":"Ilike"},"4":{"slot":4,"type":"STRING","value":"%EXEC%"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"STATE"},"2":{"slot":2,"type":"STRING","value":"Not"},"3":{"slot":3,"type":"STRING","value":"Ilike"},"4":{"slot":4,"type":"STRING","value":"%DISABLED%"}}}},"visible":true},"3":{"slot":3,"name":"Combine Conditions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"AND"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"6998":{"id":6998,"inputCardinality":"ONE","outputCardinality":"ZERO","implementationID":-1848704949,"x":1360,"y":240,"width":32,"height":32,"inputConnectorIDs":[7043],"outputConnectorIDs":[],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"MATILLION_LOG"}}}},"visible":true},"200":{"slot":200,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"MATILLION_LOG"}}}},"visible":true},"201":{"slot":201,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"BASE"}}}},"visible":true},"202":{"slot":202,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"AUDIT"}}}},"visible":true},"203":{"slot":203,"name":"Warehouse","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true},"204":{"slot":204,"name":"Target Alias","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"tgt"}}}},"visible":true},"205":{"slot":205,"name":"Source Alias","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"src"}}}},"visible":true},"206":{"slot":206,"name":"Join Expression","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"\"tgt\".\"ID\" = \"src\".\"ID\"\nand\n\"tgt\".\"JOBNAME\" = \"src\".\"JOBNAME\"\nand\n\"tgt\".\"COMPONENT_NAME\" = \"src\".\"COMPONENTNAME\"\nand\n\"tgt\".\"COMPONENT_STARTTIME\" = \"src\".\"COMPONENT_STARTTIME\"\nand \n\"tgt\".\"COMPONENT_ENDTIME\" = \"src\".\"COMPONENT_ENDTIME\"\nand\n\"tgt\".\"COMPONENT_MESSAGE\" = \"src\".\"COMPONENT_MESSAGE\""},"2":{"slot":2,"type":"STRING","value":"Join"}}}},"visible":true},"207":{"slot":207,"name":"When Matched","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"<none>"},"2":{"slot":2,"type":"STRING","value":"Update"}}}},"visible":true},"208":{"slot":208,"name":"Update Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"JOB_TYPE"},"2":{"slot":2,"type":"STRING","value":"JOB_TYPE"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"GROUPNAME"},"2":{"slot":2,"type":"STRING","value":"GROUPNAME"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"PROJECTNAME"},"2":{"slot":2,"type":"STRING","value":"PROJECTNAME"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"VERSIONID"},"2":{"slot":2,"type":"STRING","value":"VERSIONID"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"VERSIONNAME"},"2":{"slot":2,"type":"STRING","value":"VERSIONNAME"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"ENVIRONMENTNAME"},"2":{"slot":2,"type":"STRING","value":"ENVIRONMENTNAME"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"JOBNAME"},"2":{"slot":2,"type":"STRING","value":"JOBNAME"}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"JOB_STATE"},"2":{"slot":2,"type":"STRING","value":"JOB_STATE"}}},"9":{"slot":9,"values":{"1":{"slot":1,"type":"STRING","value":"ENQUEUEDTIME"},"2":{"slot":2,"type":"STRING","value":"JOB_ENQUEUEDTIME"}}},"10":{"slot":10,"values":{"1":{"slot":1,"type":"STRING","value":"JOB_STARTTIME"},"2":{"slot":2,"type":"STRING","value":"JOB_STARTTIME"}}},"11":{"slot":11,"values":{"1":{"slot":1,"type":"STRING","value":"JOB_ENDTIME"},"2":{"slot":2,"type":"STRING","value":"JOB_ENDTIME"}}},"12":{"slot":12,"values":{"1":{"slot":1,"type":"STRING","value":"JOB_MESSAGE"},"2":{"slot":2,"type":"STRING","value":"JOB_MESSAGE"}}},"13":{"slot":13,"values":{"1":{"slot":1,"type":"STRING","value":"COMPONENT_TYPE"},"2":{"slot":2,"type":"STRING","value":"COMPONENT_TYPE"}}},"14":{"slot":14,"values":{"1":{"slot":1,"type":"STRING","value":"JOBTIMESTAMP"},"2":{"slot":2,"type":"STRING","value":"JOB_TIMESTAMP"}}},"15":{"slot":15,"values":{"1":{"slot":1,"type":"STRING","value":"COMPONENT_STATE"},"2":{"slot":2,"type":"STRING","value":"COMPONENT_STATE"}}},"16":{"slot":16,"values":{"1":{"slot":1,"type":"STRING","value":"ROWCOUNT"},"2":{"slot":2,"type":"STRING","value":"ROWCOUNT"}}},"17":{"slot":17,"values":{"1":{"slot":1,"type":"STRING","value":"COMPONENT_ENDTIME"},"2":{"slot":2,"type":"STRING","value":"COMPONENT_ENDTIME"}}},"18":{"slot":18,"values":{"1":{"slot":1,"type":"STRING","value":"COMPONENT_MESSAGE"},"2":{"slot":2,"type":"STRING","value":"COMPONENT_MESSAGE"}}}},"visible":true},"209":{"slot":209,"name":"Include Not Matched","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"210":{"slot":210,"name":"Insert Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ID"},"2":{"slot":2,"type":"STRING","value":"ID"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"JOB_TYPE"},"2":{"slot":2,"type":"STRING","value":"JOB_TYPE"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"GROUPNAME"},"2":{"slot":2,"type":"STRING","value":"GROUPNAME"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"PROJECTNAME"},"2":{"slot":2,"type":"STRING","value":"PROJECTNAME"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"VERSIONID"},"2":{"slot":2,"type":"STRING","value":"VERSIONID"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"VERSIONNAME"},"2":{"slot":2,"type":"STRING","value":"VERSIONNAME"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"ENVIRONMENTNAME"},"2":{"slot":2,"type":"STRING","value":"ENVIRONMENTNAME"}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"JOBNAME"},"2":{"slot":2,"type":"STRING","value":"JOBNAME"}}},"9":{"slot":9,"values":{"1":{"slot":1,"type":"STRING","value":"JOB_STATE"},"2":{"slot":2,"type":"STRING","value":"JOB_STATE"}}},"10":{"slot":10,"values":{"1":{"slot":1,"type":"STRING","value":"ENQUEUEDTIME"},"2":{"slot":2,"type":"STRING","value":"JOB_ENQUEUEDTIME"}}},"11":{"slot":11,"values":{"1":{"slot":1,"type":"STRING","value":"JOB_STARTTIME"},"2":{"slot":2,"type":"STRING","value":"JOB_STARTTIME"}}},"12":{"slot":12,"values":{"1":{"slot":1,"type":"STRING","value":"JOB_ENDTIME"},"2":{"slot":2,"type":"STRING","value":"JOB_ENDTIME"}}},"13":{"slot":13,"values":{"1":{"slot":1,"type":"STRING","value":"JOB_MESSAGE"},"2":{"slot":2,"type":"STRING","value":"JOB_MESSAGE"}}},"14":{"slot":14,"values":{"1":{"slot":1,"type":"STRING","value":"COMPONENT_TYPE"},"2":{"slot":2,"type":"STRING","value":"COMPONENT_TYPE"}}},"15":{"slot":15,"values":{"1":{"slot":1,"type":"STRING","value":"JOBTIMESTAMP"},"2":{"slot":2,"type":"STRING","value":"JOB_TIMESTAMP"}}},"16":{"slot":16,"values":{"1":{"slot":1,"type":"STRING","value":"COMPONENTNAME"},"2":{"slot":2,"type":"STRING","value":"COMPONENT_NAME"}}},"17":{"slot":17,"values":{"1":{"slot":1,"type":"STRING","value":"COMPONENT_STATE"},"2":{"slot":2,"type":"STRING","value":"COMPONENT_STATE"}}},"18":{"slot":18,"values":{"1":{"slot":1,"type":"STRING","value":"ROWCOUNT"},"2":{"slot":2,"type":"STRING","value":"ROWCOUNT"}}},"19":{"slot":19,"values":{"1":{"slot":1,"type":"STRING","value":"COMPONENT_STARTTIME"},"2":{"slot":2,"type":"STRING","value":"COMPONENT_STARTTIME"}}},"20":{"slot":20,"values":{"1":{"slot":1,"type":"STRING","value":"COMPONENT_ENDTIME"},"2":{"slot":2,"type":"STRING","value":"COMPONENT_ENDTIME"}}},"21":{"slot":21,"values":{"1":{"slot":1,"type":"STRING","value":"COMPONENT_MESSAGE"},"2":{"slot":2,"type":"STRING","value":"COMPONENT_MESSAGE"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"6999":{"id":6999,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":1716658327,"x":1200,"y":240,"width":32,"height":32,"inputConnectorIDs":[7040],"outputConnectorIDs":[7043],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Clean-up"}}}},"visible":true},"2":{"slot":2,"name":"Include Input Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"3":{"slot":3,"name":"Calculations","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"dateadd('milliseconds',TO_NUMBER(\"ms_STARTTIME\")/1,'1970-01-01 00:00:00 0000')::timestamp_ltz"},"2":{"slot":2,"type":"STRING","value":"JOB_STARTTIME"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"dateadd('milliseconds',TO_NUMBER(\"ENQUEUEDTIME\")/1,'1970-01-01 00:00:00 0000')::timestamp_ltz"},"2":{"slot":2,"type":"STRING","value":"ENQUEUED_TIME"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"dateadd('milliseconds',TO_NUMBER(\"ms_ENDTIME\")/1,'1970-01-01 00:00:00 0000')::timestamp_ltz"},"2":{"slot":2,"type":"STRING","value":"JOB_ENDTIME"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"dateadd('milliseconds',TO_NUMBER(\"JOBTIMESTAMP\")/1,'1970-01-01 00:00:00 0000')::timestamp_ltz"},"2":{"slot":2,"type":"STRING","value":"JOBTIMESTAMP"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"dateadd('milliseconds',TO_NUMBER(\"md_STARTTIME\")/1,'1970-01-01 00:00:00 0000')::timestamp_ltz"},"2":{"slot":2,"type":"STRING","value":"COMPONENT_STARTTIME"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"dateadd('milliseconds',TO_NUMBER(\"md_ENDTIME\")/1,'1970-01-01 00:00:00 0000')::timestamp_ltz"},"2":{"slot":2,"type":"STRING","value":"COMPONENT_ENDTIME"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"7000":{"id":7000,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":1716658327,"x":560,"y":240,"width":32,"height":32,"inputConnectorIDs":[7044],"outputConnectorIDs":[7045],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"SPLIT Strings"}}}},"visible":true},"2":{"slot":2,"name":"Include Input Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"3":{"slot":3,"name":"Calculations","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"SPLIT(\"TYPE\",',')"},"2":{"slot":2,"type":"STRING","value":"TYPE"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"SPLIT(\"JOBTIMESTAMP\",',')"},"2":{"slot":2,"type":"STRING","value":"JOBTIMESTAMP"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"SPLIT(\"COMPONENTNAME\",',')\n"},"2":{"slot":2,"type":"STRING","value":"COMPONENTNAME"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"SPLIT(\"STATE\",',')"},"2":{"slot":2,"type":"STRING","value":"STATE"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"SPLIT(\"ROWCOUNT\",',')\n"},"2":{"slot":2,"type":"STRING","value":"ROWCOUNT"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"SPLIT(\"STARTTIME\",',')"},"2":{"slot":2,"type":"STRING","value":"STARTTIME"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"SPLIT(\"ENDTIME\",',')"},"2":{"slot":2,"type":"STRING","value":"ENDTIME"}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"SPLIT(\"MESSAGE\",',')"},"2":{"slot":2,"type":"STRING","value":"MESSAGE"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"}},"connectors":{"7040":{"id":7040,"sourceID":6996,"targetID":6999},"7041":{"id":7041,"sourceID":6994,"targetID":6997},"7042":{"id":7042,"sourceID":6997,"targetID":6996},"7043":{"id":7043,"sourceID":6999,"targetID":6998},"7044":{"id":7044,"sourceID":6995,"targetID":7000},"7045":{"id":7045,"sourceID":7000,"targetID":6994},"7046":{"id":7046,"sourceID":6993,"targetID":6996}},"canUndo":false,"undoCommand":"","undoCreated":-1,"canRedo":false,"redoCommand":"","redoCreated":-1,"notes":{"6991":{"id":6991,"x":1476,"y":63,"width":371,"height":472,"text":"create or replace TABLE MATILLION_LOG (\n\tID NUMBER(38,0) NOT NULL,\n\tJOB_TYPE VARCHAR(1024),\n\tGROUPNAME VARCHAR(1024),\n\tPROJECTNAME VARCHAR(1024),\n\tVERSIONID NUMBER(38,0),\n\tVERSIONNAME VARCHAR(1024),\n\tENVIRONMENTNAME VARCHAR(1024),\n\tJOBNAME VARCHAR(1024),\n\tJOB_STATE VARCHAR(250),\n\tJOB_ENQUEUEDTIME TIMESTAMP_LTZ(9),\n\tJOB_STARTTIME TIMESTAMP_LTZ(9),\n\tJOB_ENDTIME TIMESTAMP_LTZ(9),\n\tJOB_MESSAGE VARCHAR(1024),\n\tCOMPONENT_TYPE VARCHAR(1024),\n\tJOB_TIMESTAMP TIMESTAMP_LTZ(9),\n\tCOMPONENT_NAME VARCHAR(1024),\n\tCOMPONENT_STATE VARCHAR(256),\n\tROWCOUNT NUMBER(38,0),\n\tCOMPONENT_STARTTIME TIMESTAMP_LTZ(9),\n\tCOMPONENT_ENDTIME TIMESTAMP_LTZ(9),\n\tCOMPONENT_MESSAGE VARCHAR(16777216),\n\tAUDIT_SRC_SYSTEM_ID VARCHAR(1024),\n\tAUDIT_CREATEDBY VARCHAR(255) NOT NULL DEFAULT CURRENT_USER(),\n\tAUDIT_CREATEDBY_TIMESTAMP TIMESTAMP_LTZ(9) NOT NULL DEFAULT CURRENT_TIMESTAMP(),\n\tAUDIT_MODIFIEDBY VARCHAR(255) NOT NULL DEFAULT CURRENT_USER(),\n\tAUDIT_MODIFIEDBY_TIMESTAMP TIMESTAMP_LTZ(9) NOT NULL DEFAULT CURRENT_TIMESTAMP(),\n\tconstraint PK_MATILLION_LOG primary key (ID)\n);","colour":"e6e63c"},"6992":{"id":6992,"x":648,"y":88,"width":147,"height":227,"text":"Matillion Flatten is not capable of outputting the INDEX for these joins.","colour":"e6e63c"}},"noteConnectors":{},"variables":{},"grids":{}},{"id":7047,"revision":2,"created":1611343816636,"timestamp":1611343816636,"components":{"7001":{"id":7001,"inputCardinality":"ONE","outputCardinality":"ZERO","implementationID":-1848704949,"x":528,"y":-64,"width":32,"height":32,"inputConnectorIDs":[7002],"outputConnectorIDs":[],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"MATILLION_SUMMARY"}}}},"visible":true},"200":{"slot":200,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"MATILLION_SUMMARY"}}}},"visible":true},"201":{"slot":201,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"BASE"}}}},"visible":true},"202":{"slot":202,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"AUDIT"}}}},"visible":true},"203":{"slot":203,"name":"Warehouse","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true},"204":{"slot":204,"name":"Target Alias","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"tgt"}}}},"visible":true},"205":{"slot":205,"name":"Source Alias","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"src"}}}},"visible":true},"206":{"slot":206,"name":"Join Expression","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"\"tgt\".\"ID\"= \"src\".\"id\"\n"},"2":{"slot":2,"type":"STRING","value":"Join"}}}},"visible":true},"207":{"slot":207,"name":"When Matched","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"<none>"},"2":{"slot":2,"type":"STRING","value":"Update"}}}},"visible":true},"208":{"slot":208,"name":"Update Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"type"},"2":{"slot":2,"type":"STRING","value":"TYPE"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"groupName"},"2":{"slot":2,"type":"STRING","value":"GROUPNAME"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"projectName"},"2":{"slot":2,"type":"STRING","value":"PROJECTNAME"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"versionID"},"2":{"slot":2,"type":"STRING","value":"VERSIONID"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"versionName"},"2":{"slot":2,"type":"STRING","value":"VERSIONNAME"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"environmentName"},"2":{"slot":2,"type":"STRING","value":"ENVIRONMENTNAME"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"jobName"},"2":{"slot":2,"type":"STRING","value":"JOBNAME"}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"state"},"2":{"slot":2,"type":"STRING","value":"STATE"}}},"9":{"slot":9,"values":{"1":{"slot":1,"type":"STRING","value":"enqueuedTime"},"2":{"slot":2,"type":"STRING","value":"ENQUEUEDTIME"}}},"10":{"slot":10,"values":{"1":{"slot":1,"type":"STRING","value":"startTime"},"2":{"slot":2,"type":"STRING","value":"STARTTIME"}}},"11":{"slot":11,"values":{"1":{"slot":1,"type":"STRING","value":"startTime"},"2":{"slot":2,"type":"STRING","value":"ENDTIME"}}},"12":{"slot":12,"values":{"1":{"slot":1,"type":"STRING","value":"message"},"2":{"slot":2,"type":"STRING","value":"MESSAGE"}}},"13":{"slot":13,"values":{"1":{"slot":1,"type":"STRING","value":"id"},"2":{"slot":2,"type":"STRING","value":"ID"}}}},"visible":true},"209":{"slot":209,"name":"Include Not Matched","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"210":{"slot":210,"name":"Insert Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"id"},"2":{"slot":2,"type":"STRING","value":"ID"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"type"},"2":{"slot":2,"type":"STRING","value":"TYPE"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"groupName"},"2":{"slot":2,"type":"STRING","value":"GROUPNAME"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"projectName"},"2":{"slot":2,"type":"STRING","value":"PROJECTNAME"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"versionID"},"2":{"slot":2,"type":"STRING","value":"VERSIONID"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"versionName"},"2":{"slot":2,"type":"STRING","value":"VERSIONNAME"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"environmentName"},"2":{"slot":2,"type":"STRING","value":"ENVIRONMENTNAME"}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"jobName"},"2":{"slot":2,"type":"STRING","value":"JOBNAME"}}},"9":{"slot":9,"values":{"1":{"slot":1,"type":"STRING","value":"state"},"2":{"slot":2,"type":"STRING","value":"STATE"}}},"10":{"slot":10,"values":{"1":{"slot":1,"type":"STRING","value":"enqueuedTime"},"2":{"slot":2,"type":"STRING","value":"ENQUEUEDTIME"}}},"11":{"slot":11,"values":{"1":{"slot":1,"type":"STRING","value":"startTime"},"2":{"slot":2,"type":"STRING","value":"STARTTIME"}}},"12":{"slot":12,"values":{"1":{"slot":1,"type":"STRING","value":"endTime"},"2":{"slot":2,"type":"STRING","value":"ENDTIME"}}},"13":{"slot":13,"values":{"1":{"slot":1,"type":"STRING","value":"message"},"2":{"slot":2,"type":"STRING","value":"MESSAGE"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"7050":{"id":7050,"inputCardinality":"ZERO","outputCardinality":"MANY","implementationID":1354890871,"x":368,"y":-64,"width":32,"height":32,"inputConnectorIDs":[],"outputConnectorIDs":[7002],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"STG_MATILLION_SUMMARY"}}}},"visible":true},"2":{"slot":2,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"STG_MATILLION_SUMMARY"}}}},"visible":true},"3":{"slot":3,"name":"Column Names","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"id"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"type"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"groupName"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"projectName"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"versionID"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"versionName"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"environmentName"}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"jobName"}}},"9":{"slot":9,"values":{"1":{"slot":1,"type":"STRING","value":"state"}}},"10":{"slot":10,"values":{"1":{"slot":1,"type":"STRING","value":"enqueuedTime"}}},"11":{"slot":11,"values":{"1":{"slot":1,"type":"STRING","value":"startTime"}}},"12":{"slot":12,"values":{"1":{"slot":1,"type":"STRING","value":"endTime"}}},"13":{"slot":13,"values":{"1":{"slot":1,"type":"STRING","value":"message"}}}},"visible":true},"5":{"slot":5,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"BASE"}}}},"visible":true},"6":{"slot":6,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"AUDIT"}}}},"visible":true},"7":{"slot":7,"name":"Offset","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":""}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"}},"connectors":{"7002":{"id":7002,"sourceID":7050,"targetID":7001}},"canUndo":false,"undoCommand":"","undoCreated":-1,"canRedo":false,"redoCommand":"","redoCreated":-1,"notes":{"7048":{"id":7048,"x":791,"y":-268,"width":454,"height":381,"text":"create or replace TABLE MATILLION_SUMMARY (\n\tID VARCHAR(2000) NOT NULL,\n\tTYPE VARCHAR(2000),\n\tGROUPNAME VARCHAR(2000),\n\tPROJECTNAME VARCHAR(2000),\n\tVERSIONID VARCHAR(2000),\n\tVERSIONNAME VARCHAR(2000),\n\tENVIRONMENTNAME VARCHAR(2000),\n\tJOBNAME VARCHAR(2000),\n\tSTATE VARCHAR(2000),\n\tENQUEUEDTIME VARCHAR(2000),\n\tSTARTTIME VARCHAR(2000),\n\tENDTIME VARCHAR(2000),\n\tMESSAGE VARCHAR(2000),\n\tAUDIT_SRC_SYSTEM_ID VARCHAR(1024),\n\tAUDIT_CREATEDBY VARCHAR(255) NOT NULL DEFAULT CURRENT_USER(),\n\tAUDIT_CREATEDBY_TIMESTAMP TIMESTAMP_LTZ(9) NOT NULL DEFAULT CURRENT_TIMESTAMP(),\n\tAUDIT_MODIFIEDBY VARCHAR(255) NOT NULL DEFAULT CURRENT_USER(),\n\tAUDIT_MODIFIEDBY_TIMESTAMP TIMESTAMP_LTZ(9) NOT NULL DEFAULT CURRENT_TIMESTAMP(),\n\tconstraint PK_MATILLION_SUMMARY primary key (ID)\n);","colour":"e6e63c"},"7049":{"id":7049,"x":-18,"y":-135,"width":305,"height":148,"text":"**``CHANGE HISTORY``**\n\n20191108:  Created (BRR)","colour":"00ce4f"}},"noteConnectors":{},"variables":{},"grids":{}}],"variables":[{"name":"env_account","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},{"name":"env_monitor_email","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},{"name":"env_name","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},{"name":"env_password","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},{"name":"env_sas_token","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},{"name":"env_storage","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"},{"name":"env_username","type":"TEXT","scope":"BRANCH","description":"","visibility":"PUBLIC"}],"environments":[{"index":0,"name":"securitastest-west-europe MAT User","instanceCredentials":true,"credentialsName":"","awsCredentialsId":-1,"gcCredentialsId":-1,"azureCredentialsId":0,"schema":"BASE","encrypted":false,"url":"securitastest.west-europe.azure","port":"WH_DATA_LOAD","database":"AUDIT","driver":null,"user":"MATUSER","passwordName":"","passphraseName":"","role":"ACCOUNTADMIN","variables":{"env_name":"DEV","env_monitor_email":"naresh.bawankar@securitas.com;santhosh.tm@securitas.com","env_password":"","env_username":"MATILLION_USER","env_account":"securitasdev.west-europe.azure","env_sas_token":"?sv=2019-07-07&ss=btqf&srt=sco&st=2020-09-25T15%3A33%3A33Z&se=2022-09-26T15%3A33%3A00Z&sp=rwdlacup&sig=9N6EITMw7l3ujhP7UrDq%2F7PQQ7K0mGj8usrIfpAWDro%3D","env_storage":"devwewhstore"},"defaultStorageLocation":"","concurrentConnections":4,"passwordType":"PASSWORD","connectionOptions":{},"defaultEnvironment":false}]}